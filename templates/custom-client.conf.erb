#################################################
# OpenVPN client config generated by puppet     #
#################################################

<% unless @client_ip.nil? %>
ifconfig-push <%= @client_ip %> <%= @server_ip %>
<% end %>

<% unless @iroute.nil? %>
iroute <%= @iroute %>
<% end %>

<% unless @push_route.nil? || @push_route.empty? %>
# Push routes to the client to allow it
# to reach other private subnets behind
# the server.
<% @push_route.each do |route| %>
push "route <%= route %>"
<% end %>
<% end %>

<% if @push_default_gw %>
# If enabled, this directive will configure
# all clients to redirect their default
# network gateway through the VPN.
push "redirect-gateway def1 bypass-dhcp"
<% end %>

<% unless @dns_server.nil? || @dns_server.empty? %>
# Certain Windows-specific network settings
# can be pushed to clients, such as DNS
# or WINS server addresses.
<% @dns_server.each do |dns| %>
push "dhcp-option DNS <%= dns %>"
<% end %>
<% end %>

<%= @additional_config %>
